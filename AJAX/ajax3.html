<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
<script src="./myajax.js"></script>
</head>
<body>
    <div id="id_disp" style="border: 1px solid black"></div>
    <input type="button" value="버튼" id="id_btn">
<script>
    // namespace
    // 
    // 자바스크립트 변수명 사용 가능한 특수문자 _ , $
    // var $ = {}; // $ 변수 안에 ajax를 넣는다.

    // $.ajax = function(p_json) {
    //     var v_ajax = new XMLHttpRequest();
    //     v_ajax.open(p_json.method, p_json.url, p_json.async);
    //     v_ajax.onreadystatechange = function() {
    //         if(v_ajax.readyState == 4 && v_ajax.status == 200) {
    //             p_json.success(v_ajax.responseText);
    //         }
    //     }
    //     v_ajax.send();
    // }
    // =================== JS 라이브러리로 가져왔기 때문에 주석 처리함 ===================

    // $.ajax({
    //     method : "get",
    //     url : "data.txt",
    //     async : true,
    //     dataType : "text", // js 라이브러리에서 dataType을 구분해 JSON.parse 분류
    //     success : function (p_rslt) {
    //         console.log(p_rslt); // text 문자열 출력
    //         // console.log(JSON.parse(p_rslt)); // JSON.parse 이용, 배열 형태로 변환
    //     }
    // })
    // alert("동기/비동기 확인");

    // xml 내용을 table 형태로 뿌리기
    var v_btn = document.querySelector("#id_btn");
    v_btn.addEventListener("click", function () {
        $.ajax({
            method : "get",
            url : "data.xml",
            async : true,
            dataType : "xml",
            success : function (p_rslt) {
                var v_friends = p_rslt.getElementsByTagName("friend");
                var v_table = "<table border=2>";
                v_table += "<tr><th>name</th><th>age</th><th>chac</th></tr>";
                for(var i = 0; i < v_friends.length; i++){
                v_table += "<tr>";
                v_table += "<td>" + p_rslt.getElementsByTagName("name")[i].innerHTML + "</td>";
                v_table += "<td>" + p_rslt.getElementsByTagName("age")[i].innerHTML + "</td>";
                v_table += "<td>" + p_rslt.getElementsByTagName("chac")[i].innerHTML + "</td>";
                v_table += "</tr>";
        }
        v_table += "</table>";
        document.querySelector("#id_disp").innerHTML = v_table;
            // console.log(v_friends[0]);
            // document.getElementsByTagName("name")
            }
        })
    })
</script>
</body>
</html>